#!/usr/bin/env bash
#Simple script that batch link config files form this repository 
#their usage location

#   TODO
#   Add  arguments help, source/source destination

STARTING_DIR=$(pwd)
ORIGIN_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/.."
cd $ORIGIN_DIR
ORIGIN_DIR=$(pwd)
DESTINY_DIR=~
cd $STARTING_DIR

#Batch link everything
FILES=$(find $ORIGIN_DIR -maxdepth 1 \( ! -iname ".*" \) );

for f in $FILES
do
    filename=$(basename $f)
    target_filename=$DESTINY_DIR"/."$filename
    
    if [ -h $target_filename ];
    then
           rm $target_filename;
    fi

    if [ ! -f $target_filename ] && [ ! -d $target_filename ];
    then
        ln -sv $f $target_filename 
    fi

done

